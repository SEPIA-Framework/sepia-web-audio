var WebRtcVoiceActivityDetector=function(a,b){this.vadModule={},this.options=a||{};var c=this.options.onInfo||this.options.onPrint||function(a){console.log("VAD print",a)},d=this.options.onError||this.options.onPrintErr||function(a){console.error("VAD printErr",a)},e=this.options.onStatusMessage||this.options.onSetStatus||function(a){console.log("VAD setStatus",a)},f=this.options.mode==null?3:this.options.mode;WebRtcVad({preRun:[],postRun:[],print:function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments).join(" ")),c(a)},printErr:function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments).join(" ")),d(a)},setStatus:function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments).join(" ")),e(a)},totalDependencies:0,monitorRunDependencies:function(a){this.totalDependencies=Math.max(this.totalDependencies,a),this.setStatus(a?"Preparing... ("+(this.totalDependencies-a)+"/"+this.totalDependencies+")":"All downloads complete.")},noInitialRun:!0}).then(function(a){var b={wasmModule:a},e=a.cwrap("main");if(1!=e())throw d("VAD 'main' error"),{name:"VadModuleError",message:"Failed to initialize via 'main()'"};if(b.setMode=a.cwrap("setmode","number",["number"]),b.getMode=function(){return f},0!=b.setMode(f))throw d("VAD 'setMode' error"),{name:"VadModuleError",message:"Failed to set mode"};return c("VAD mode: "+f),b.process=a.cwrap("process_data","number",["number","number","number","number","number","number"]),b.getVoiceActivity=function(c,d){let e=d.length*d.BYTES_PER_ELEMENT,f=a._malloc(e),g=new Uint8Array(a.HEAPU8.buffer,f,e);g.set(new Uint8Array(d.buffer));let h=b.process(g.byteOffset,d.length,c,d[0],d[100],d[2e3]);return a._free(g.byteOffset),h},b}).then(function(a){this.vadModule=a,b&&b(this.vadModule)})};
