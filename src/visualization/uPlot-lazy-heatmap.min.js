(function(){uPlot.lazy.Heatmap=function(a,b){function c(a){return o[f](a)}b||(b={});var d=b.dataPixelWidth||b.dataPixelSize||4,e=b.dataPixelHeight||b.dataPixelSize||4,f=b.colorIndex||0,g=b.maxDataPoints==null?150:b.maxDataPoints;a.innerHTML="";var h=a.getBoundingClientRect(),i=document.createElement("canvas");i.style.display="block",i.width=h.width-2,i.height=h.height-2,a.appendChild(i);var j,k,l,m,n=i.getContext("2d");this.setData=function(a){j=a},this.getData=function(){return j},this.addDataArray=function(a){if(!j){j=[];var b=g?i.width/(g*d):1,c=i.height/(a.length*e);n.scale(b,c)}j.push(a),a.forEach(function(a){k=k==null?a:Math.min(k,a),l=l==null?a:Math.max(l,a)}),m=l-k,g&&j.length>g&&j.shift()},this.draw=function(){if(j){var a=255/m;j.forEach(function(b,f){for(let g,h=0;h<b.length;h++)g=b[h],g=Math.round((g-k)*a),n.fillStyle=c(g),n.fillRect(f*d,0+h*e,d,e)})}};var o={0:function(a){return"rgb("+a+","+a+","+a+")"},1:function(a){return"rgb("+a+", 0,"+(255-a)+")"}};this.cloneCanvas=function(a){var b=document.createElement("canvas");b.width=i.width,b.height=i.height,a.appendChild(b),b.getContext("2d").drawImage(i,0,0)}}})();