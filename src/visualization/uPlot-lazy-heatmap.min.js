(function(){uPlot.lazy.Heatmap=function(a,b){function c(a){return o[f].fun(a)}b||(b={});var d=b.dataPixelWidth||b.dataPixelSize||4,e=b.dataPixelHeight||b.dataPixelSize||4,f=b.colorIndex||0,g=b.maxDataPoints==null?150:b.maxDataPoints;a.innerHTML="";var h=a.getBoundingClientRect(),i=document.createElement("canvas");i.style.display="block",i.width=h.width-2,i.height=h.height-2,a.appendChild(i);var j,k,l,m,n=i.getContext("2d");this.resetMax=function(){k=void 0,l=void 0},this.setData=function(a){j=a},this.getData=function(){return j},this.addDataArray=function(a){if(!j){j=[];var b=g?i.width/(g*d):1,c=i.height/(a.length*e);n.scale(b,c)}j.push(a),a.forEach(function(a){k=k==null?a:Math.min(k,a),l=l==null?a:Math.max(l,a)}),m=l-k,g&&j.length>g&&j.shift()},this.draw=function(){if(j){var a=o[f].max/m;j.forEach(function(b,f){for(let g,h=0;h<b.length;h++)g=b[h],g=Math.round((g-k)*a),n.fillStyle=c(g),n.fillRect(f*d,0+h*e,d,e)})}},this.setColorIndex=function(a){f=a};var o={0:{max:255,fun:function(a){return"rgb("+a+","+a+","+a+")"}},1:{max:255,fun:function(a){return"rgb("+a+", 0,"+(255-a)+")"}},2:{max:299,fun:function(a){return"hsl("+(240-a)+", 100%, 50%)"}},3:{max:359,fun:function(a){return"hsl("+(60+a)+", 100%, 50%)"}},4:{max:399,fun:function(a){return 50>a?"hsl(240, 75%, "+a+"%)":349>a?"hsl("+(240-a+50)+", 75%, 50%)":"hsl(-59, 75%, "+(a-299)+"%)"}}};this.cloneCanvas=function(a){var b=document.createElement("canvas");b.width=i.width,b.height=i.height,a.appendChild(b),b.getContext("2d").drawImage(i,0,0)}}})();